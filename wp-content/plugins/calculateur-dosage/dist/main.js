!function(){
/*!*******************************!*\
  !*** ./assets/src/js/main.js ***!
  \*******************************/
const e=document.querySelectorAll(".cbd-calculator-form");function m(e,t){for(var[r,a]of Object.entries(e))if(parseInt(r)>=parseInt(t)){result=a;break}return result}function _(r,e,t,a){const n=new XMLHttpRequest;n.open("POST",wc_add_to_cart_params.ajax_url),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),$string=e?"action=caculateur_ajax_results&product_value="+e+"&traitement_value="+t+"&human_weight_value="+a:"action=caculateur_ajax_results&traitement_value="+t+"&human_weight_value="+a,n.send($string),n.onload=function(){var e=JSON.parse(n.responseText),t=e.data.msg;if("success"===e.data.status){let e=r.nextElementSibling;e.innerHTML="<p>"+t+"</p>"}}}e&&e.forEach(s=>{const i=s.querySelector("#product"),n=s.querySelector("#traitement"),e=s.querySelector("#human_weight"),t=document.querySelector(".posologie__value"),l=s.querySelector(".product_selector"),r=s.querySelectorAll('input[type="radio"]'),c=s.querySelector(".traitement_selector"),o=s.querySelector(".human_weight_selector"),u=s.querySelector(".cbd-calculator__posologie");(function(t){for(let e=0;e<t.length;e++)if(t[e].checked)return t[e].value})(r);let d,v=i.value,h=n.value,a=n.options[n.selectedIndex],f=JSON.parse(a.getAttribute("data-posologie")),g=e.value,p=s.querySelector(".range_value span");var L=m(f,g);t.innerHTML=L,p.innerHTML=e.value,l&&(l.classList.contains("hide")&&(v=!1),i&&i.addEventListener("change",function(e){v=e.currentTarget.value;var t,r,e=c.querySelectorAll("option");let a=JSON.parse(v);for([t,r]of Object.entries(e))a.includes(parseInt(r.value))?(r.hidden=!1,n.value=r.value):r.hidden=!0;e=new Event("change",{bubbles:!0});n.dispatchEvent(e),"*"!==v?c.classList.remove("hide"):c.classList.add("hide")},!1)),r&&r.forEach(n=>{n.addEventListener("click",function(){d=n.value;let e=s.nextElementSibling;if(l.classList.contains("hide"))e.classList.add("hide"),c.classList.add("hide"),o.classList.add("hide"),u.classList.add("hide"),l.classList.remove("hide"),v=i.value;else{e.classList.remove("hide"),l.classList.add("hide"),c.classList.remove("hide"),o.classList.remove("hide"),u.classList.remove("hide"),v=!1;var t,r,a=c.querySelectorAll("option");for([t,r]of Object.entries(a))r.hidden=!1;a=new Event("change",{bubbles:!0});i.dispatchEvent(a),i.value="*"}_(s,v,h,g)})}),n&&n.addEventListener("change",function(e){h=e.currentTarget.value,a=n.options[n.selectedIndex],f=JSON.parse(a.getAttribute("data-posologie")),_(s,v,h,g),t.innerHTML=m(f,g),o.classList.remove("hide"),u.classList.remove("hide")},!1),e&&(e.addEventListener("change",function(e){g=e.currentTarget.value,_(s,v,h,g),t.innerHTML=m(f,g)},!1),e.addEventListener("input",function(e){p.innerHTML=e.currentTarget.value;e=(e.currentTarget.value-e.currentTarget.min)/(e.currentTarget.max-e.currentTarget.min)*100;this.style.background="linear-gradient(to right, #FFD372 0%, #FFD372 "+e+"%, #ffff "+e+"%, #ffff 100%)"},!1)),_(s,v,h,g)})}();